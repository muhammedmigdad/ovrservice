{% extends "base/customer-base.html" %}
{% block container %}
{% load static %}

<section class="bg-green-500 min-h-[100vh] flex flex-col justify-center items-center text-white px-4 relative overflow-hidden">
    <!-- Background Layers -->
    <div class="absolute inset-0 bg-gradient-to-br from-green-600 via-green-500 to-green-700 animate-bgFlow">
        <!-- Wave Layer with Enhanced 3D Effect -->
        <div class="wave-layer animate-waveFlow transform-style-3d"></div>
        <!-- Starfield -->
        <div class="starfield"></div>
        <!-- Floating Orbs with Trails -->
        <div class="glow-orb orb-1 animate-orbDrift has-trail" style="animation-delay: 0s;"></div>
        <div class="glow-orb orb-2 animate-orbDrift has-trail" style="animation-delay: 1.5s;"></div>
        <div class="glow-orb orb-3 animate-orbDrift has-trail" style="animation-delay: 3s;"></div>
    </div>

    <!-- Main Card -->
    <div class="bg-[#252424] p-6 sm:p-10 rounded-3xl shadow-3xl text-center max-w-xl w-full mx-4 
                animate-grandEntrance relative z-20 overflow-hidden perspective-1000 transform-style-3d">
        <!-- Particle System -->
        <div class="absolute inset-0 pointer-events-none particle-system"></div>

        <!-- Success Badge with Glow -->
        <div class="success-badge animate-badgeSpin mb-8 relative">
            <img class="w-20 h-20 sm:w-24 sm:h-24 mx-auto animate-pulseGlow" src="/static/images/checkmark.png" alt="">
            <div class="absolute inset-0 glow-ring animate-glowPulse"></div>
        </div>

        <!-- Title with 3D Letter Flip -->
        <h2 class="text-3xl sm:text-5xl font-extrabold text-yellow-400 mb-6 relative z-10 leading-tight perspective-500">
            <span class="inline-block animate-letterFlip" style="animation-delay: 0.1s">ðŸŽ‰</span>
            <span class="inline-block animate-letterFlip" style="animation-delay: 0.2s">O</span>
            <span class="inline-block animate-letterFlip" style="animation-delay: 0.3s">r</span>
            <span class="inline-block animate-letterFlip" style="animation-delay: 0.4s">d</span>
            <span class="inline-block animate-letterFlip" style="animation-delay: 0.5s">e</span>
            <span class="inline-block animate-letterFlip" style="animation-delay: 0.6s">r</span>
            <span class="inline-block animate-letterFlip" style="animation-delay: 0.7s"> </span>
            <span class="inline-block animate-letterFlip" style="animation-delay: 0.8s">S</span>
            <span class="inline-block animate-letterFlip" style="animation-delay: 0.9s">u</span>
            <span class="inline-block animate-letterFlip" style="animation-delay: 1.0s">c</span>
            <span class="inline-block animate-letterFlip" style="animation-delay: 1.1s">c</span>
            <span class="inline-block animate-letterFlip" style="animation-delay: 1.2s">e</span>
            <span class="inline-block animate-letterFlip" style="animation-delay: 1.3s">s</span>
            <span class="inline-block animate-letterFlip" style="animation-delay: 1.4s">s</span>
            <span class="inline-block animate-letterFlip" style="animation-delay: 1.5s">!</span>
            <span class="inline-block animate-letterFlip" style="animation-delay: 1.6s">ðŸŽ‰</span>
        </h2>

        <!-- Message with Subtle Float -->
        <p class="text-gray-300 mb-8 text-lg sm:text-xl animate-contentUnfold relative z-10 tracking-wide hover:animate-floatText">
            Thank you for your purchase! Your order has been successfully processed and 
            is on its way to you. Celebrate this moment with us!
        </p>

        <!-- Interactive Buttons -->
        <a href="{% url 'customers:order-item'  %}"
        class="bg-purple-400 hover:bg-purple-500 text-gray-900 font-bold py-3 px-8 rounded-full 
               transition-all duration-500 transform hover:scale-110 hover:shadow-2xl inline-block 
               animate-buttonShine relative z-10 overflow-hidden interactive-button">
         <span class="relative z-20">View Order</span>
         <span class="absolute inset-0 bg-purple-300 animate-buttonRipple"></span>
         <span class="absolute inset-0 shine-effect"></span>
        </a>
     
        <a href="{% url 'customers:index' %}" 
           class="bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold py-3 px-8 rounded-full 
                  transition-all duration-500 transform hover:scale-110 hover:shadow-2xl inline-block 
                  animate-buttonShine relative z-10 overflow-hidden interactive-button">
            <span class="relative z-20">Back to Home</span>
            <span class="absolute inset-0 bg-yellow-300 animate-buttonRipple"></span>
            <span class="absolute inset-0 shine-effect"></span>
        </a>

        <!-- Enhanced Confetti Cannons -->
        <div class="confetti-cannon cannon-left animate-confettiBurst"></div>
        <div class="confetti-cannon cannon-right animate-confettiBurst" style="animation-delay: 0.5s;"></div>
    </div>
</section>

<style>
    /* Enhanced Background Flow with Depth */
    @keyframes bgFlow {
        0%, 100% { background-position: 0% 0%; transform: scale(1); opacity: 0.9; }
        50% { background-position: 100% 100%; transform: scale(1.05); opacity: 1; }
    }

    /* Wave Animation with 3D Tilt */
    @keyframes waveFlow {
        0% { transform: translateX(-100%) rotateX(10deg); }
        100% { transform: translateX(100%) rotateX(-10deg); }
    }

    /* Advanced Grand Entrance with Bounce */
    @keyframes grandEntrance {
        0% {
            opacity: 0;
            transform: perspective(1000px) rotateY(-90deg) scale(0.6) translateZ(-200px);
            filter: blur(10px) brightness(0.8);
        }
        60% {
            transform: perspective(1000px) rotateY(20deg) scale(1.1) translateZ(50px);
            filter: blur(0) brightness(1.2);
        }
        80% {
            transform: perspective(1000px) rotateY(-10deg) scale(1.05) translateZ(20px);
        }
        100% {
            opacity: 1;
            transform: perspective(1000px) rotateY(0) scale(1) translateZ(0);
            filter: blur(0) brightness(1);
        }
    }

    /* 3D Letter Flip */
    @keyframes letterFlip {
        0% {
            opacity: 0;
            transform: perspective(500px) rotateX(-90deg) translateY(60px) scale(0.7);
            filter: blur(3px);
        }
        50% {
            transform: perspective(500px) rotateX(30deg) translateY(-20px) scale(1.3);
        }
        100% {
            opacity: 1;
            transform: perspective(500px) rotateX(0) translateY(0) scale(1);
            filter: blur(0);
        }
    }

    /* Content Unfold with Elastic Bounce */
    @keyframes contentUnfold {
        0% {
            opacity: 0;
            transform: translateY(80px) scaleY(0.8);
            clip-path: polygon(0 100%, 100% 100%, 100% 100%, 0 100%);
        }
        70% {
            transform: translateY(-10px) scaleY(1.05);
        }
        100% {
            opacity: 1;
            transform: translateY(0) scaleY(1);
            clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
        }
    }

    /* Interactive Float Text on Hover */
    @keyframes floatText {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
    }

    /* Badge Spin with Overshoot */
    @keyframes badgeSpin {
        0% { transform: perspective(500px) rotateY(-180deg) scale(0); opacity: 0; }
        80% { transform: perspective(500px) rotateY(20deg) scale(1.1); }
        100% { transform: perspective(500px) rotateY(0) scale(1); opacity: 1; }
    }

    /* Glow Pulse for Badge */
    @keyframes glowPulse {
        0%, 100% { box-shadow: 0 0 10px rgba(251, 191, 36, 0.5); }
        50% { box-shadow: 0 0 30px rgba(251, 191, 36, 0.8); }
    }

    /* Enhanced Button Effects */
    @keyframes buttonShine {
        0%, 100% { box-shadow: 0 0 0 0 rgba(251, 191, 36, 0.8); }
        50% { box-shadow: 0 0 25px 10px rgba(251, 191, 36, 0.6); }
    }

    @keyframes buttonRipple {
        0% { transform: scale(0) rotate(0deg); opacity: 0.7; }
        100% { transform: scale(5) rotate(360deg); opacity: 0; }
    }

    /* Advanced Particle Explode with Spin */
    @keyframes particleExplode {
        0% {
            opacity: 0;
            transform: scale(0) rotate(0deg) translate(0, 0);
        }
        40% {
            opacity: 1;
            transform: scale(1.2) rotate(180deg) translate(var(--x-move), var(--y-move));
        }
        100% {
            opacity: 0;
            transform: scale(0.8) rotate(360deg) translate(calc(var(--x-move) * 1.5), calc(var(--y-move) * 1.5));
        }
    }

    /* Enhanced Confetti Burst with Rotation */
    @keyframes confettiBurst {
        0% { transform: scale(0) rotate(0deg); opacity: 0; }
        50% { transform: scale(1.2) rotate(180deg); opacity: 1; }
        100% { transform: scale(0) rotate(360deg); opacity: 0; }
    }

    /* Orb Drift with Pulsation */
    @keyframes orbDrift {
        0% { transform: translate(0, 0) scale(1); opacity: 0.2; }
        50% { transform: translate(var(--x-drift), var(--y-drift)) scale(1.3); opacity: 0.5; }
        100% { transform: translate(0, 0) scale(1); opacity: 0.2; }
    }

    /* Star Twinkle with Flicker */
    @keyframes starTwinkle {
        0%, 100% { opacity: 0.3; transform: scale(1); }
        50% { opacity: 1; transform: scale(1.5); }
        75% { opacity: 0.6; }
    }

    /* Class Applications */
    .animate-bgFlow { animation: bgFlow 6s ease-in-out infinite; }
    .animate-waveFlow { animation: waveFlow 10s linear infinite; }
    .animate-grandEntrance { animation: grandEntrance 1.5s ease-out forwards; }
    .animate-letterFlip { animation: letterFlip 0.7s ease-out forwards; }
    .animate-contentUnfold { animation: contentUnfold 1.2s ease-out 1s forwards; }
    .animate-floatText { animation: floatText 1.5s ease-in-out infinite; }
    .animate-badgeSpin { animation: badgeSpin 1s ease-out forwards; }
    .animate-glowPulse { animation: glowPulse 2s ease-in-out infinite; }
    .animate-buttonShine { animation: buttonShine 2.5s ease-in-out infinite; }
    .animate-buttonRipple { animation: buttonRipple 2s ease-out infinite; }
    .animate-particleExplode { animation: particleExplode 2.5s ease-out infinite; }
    .animate-confettiBurst { animation: confettiBurst 3s ease-out infinite; }
    .animate-orbDrift { animation: orbDrift 5s ease-in-out infinite; }
    .animate-starTwinkle { animation: starTwinkle 2s ease-in-out infinite; }
    .animate-pulseGlow { animation: glowPulse 1.5s ease-in-out infinite; }

    /* Structural Styles */
    .perspective-500 { perspective: 500px; }
    .perspective-1000 { perspective: 1000px; }
    .transform-style-3d { transform-style: preserve-3d; }

    .wave-layer {
        position: absolute;
        bottom: 0;
        width: 200%;
        height: 20%;
        background: rgba(255, 255, 255, 0.1);
        clip-path: url(#waveClip);
    }

    .starfield { position: absolute; inset: 0; }
    .star {
        position: absolute;
        width: 4px;
        height: 4px;
        background: white;
        border-radius: 50%;
        animation: starTwinkle 2s ease-in-out infinite;
    }

    .glow-orb {
        position: absolute;
        width: 120px;
        height: 120px;
        background: radial-gradient(circle, rgba(251, 191, 36, 0.4) 0%, rgba(251, 191, 36, 0) 70%);
        border-radius: 50%;
    }
    .orb-1 { left: 15%; top: 10%; --x-drift: -30px; --y-drift: 40px; }
    .orb-2 { right: 20%; bottom: 15%; --x-drift: 40px; --y-drift: -30px; }
    .orb-3 { left: 50%; top: 50%; --x-drift: -20px; --y-drift: -50px; }

    .has-trail::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, rgba(251, 191, 36, 0.2) 0%, rgba(251, 191, 36, 0) 70%);
        animation: trailFade 5s ease-in-out infinite;
        transform: translate(-50%, -50%);
    }
    @keyframes trailFade {
        0%, 100% { opacity: 0; transform: scale(1); }
        50% { opacity: 0.3; transform: scale(1.5); }
    }

    .particle {
        position: absolute;
        width: 12px;
        height: 12px;
        background: radial-gradient(circle, #FBBF24 0%, rgba(251, 191, 36, 0) 70%);
        border-radius: 50%;
    }

    .confetti-cannon {
        position: absolute;
        width: 20px;
        height: 20px;
        background: #FBBF24;
        transform-origin: center;
    }
    .cannon-left { left: -10px; bottom: -10px; }
    .cannon-right { right: -10px; bottom: -10px; }

    .shine-effect {
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, rgba(255, 255, 255, 0) 45%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0) 55%);
        animation: shineSweep 4s infinite;
    }

    @keyframes shineSweep {
        0% { transform: translateX(-100%) translateY(-100%) rotate(0deg); }
        20% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }

    .glow-ring {
        border-radius: 50%;
        background: radial-gradient(circle, rgba(251, 191, 36, 0.3) 0%, rgba(251, 191, 36, 0) 70%);
    }

    /* Responsive Adjustments */
    @media (max-width: 640px) {
        .text-3xl { font-size: 1.875rem; }
        .text-lg { font-size: 1rem; }
        .particle { width: 8px; height: 8px; }
        .glow-orb { width: 80px; height: 80px; }
        .star { width: 3px; height: 3px; }
        .confetti-cannon { width: 15px; height: 15px; }
    }

    @media (min-width: 1024px) {
        .max-w-xl { max-width: 42rem; }
    }
</style>

<!-- SVG Clip Path for Wave -->
<svg width="0" height="0">
    <defs>
        <clipPath id="waveClip">
            <path d="M0,100 Q300,0 600,100 T1200,100 V200 H0 Z" />
        </clipPath>
    </defs>
</svg>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Dynamic Particles with Enhanced Variation
        const particleSystem = document.querySelector('.particle-system');
        for (let i = 0; i < 40; i++) {
            const particle = document.createElement('span');
            particle.className = `particle particle-${i + 1} animate-particleExplode`;
            particle.style.setProperty('--x-move', `${Math.random() * 250 - 125}px`);
            particle.style.setProperty('--y-move', `${Math.random() * 250 - 125}px`);
            particle.style.width = `${Math.random() * 10 + 5}px`;
            particle.style.height = particle.style.width;
            particle.style.animationDelay = `${Math.random() * 2.5}s`;
            particle.style.animationDuration = `${1.5 + Math.random() * 1.5}s`;
            particleSystem.appendChild(particle);
        }

        // Enhanced Dynamic Confetti with Physics
        const cannons = document.querySelectorAll('.confetti-cannon');
        cannons.forEach(cannon => {
            for (let i = 0; i < 25; i++) {
                const confetti = document.createElement('span');
                confetti.className = 'confetti-piece';
                const size = Math.random() * 10 + 5;
                confetti.style.width = `${size}px`;
                confetti.style.height = `${size}px`;
                confetti.style.background = `hsl(${Math.random() * 360}, 80%, 60%)`;
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confetti.style.animation = `confettiFall ${1.5 + Math.random() * 2}s cubic-bezier(0.2, 0.8, 0.5, 1) forwards`;
                confetti.style.animationDelay = `${Math.random() * 1.5}s`;
                confetti.style.transform = `translate(${Math.random() * 150 - 75}px, ${Math.random() * -150 - 50}px) rotate(${Math.random() * 360}deg)`;
                cannon.appendChild(confetti);
            }
        });

        // Dynamic Starfield with More Stars
        const starfield = document.querySelector('.starfield');
        for (let i = 0; i < 30; i++) {
            const star = document.createElement('span');
            star.className = 'star animate-starTwinkle';
            star.style.left = `${Math.random() * 100}%`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.width = `${Math.random() * 3 + 2}px`;
            star.style.height = star.style.width;
            star.style.animationDelay = `${Math.random() * 2}s`;
            star.style.animationDuration = `${1.5 + Math.random() * 1.5}s`;
            starfield.appendChild(star);
        }

        // Interactive Button Effects
        const buttons = document.querySelectorAll('.interactive-button');
        buttons.forEach(button => {
            button.addEventListener('mouseenter', () => {
                button.classList.add('animate-pulse');
            });
            button.addEventListener('mouseleave', () => {
                button.classList.remove('animate-pulse');
            });
            button.addEventListener('click', () => {
                const burst = document.createElement('span');
                burst.className = 'click-burst';
                burst.style.position = 'absolute';
                burst.style.width = '50px';
                burst.style.height = '50px';
                burst.style.background = 'radial-gradient(circle, rgba(251, 191, 36, 0.5) 0%, rgba(251, 191, 36, 0) 70%)';
                burst.style.borderRadius = '50%';
                burst.style.animation = 'burstFade 0.5s ease-out forwards';
                burst.style.left = '50%';
                burst.style.top = '50%';
                burst.style.transform = 'translate(-50%, -50%)';
                button.appendChild(burst);
                setTimeout(() => burst.remove(), 500);
            });
        });

        // Play Celebration Sound
        const audio = new Audio('/static/sounds/celebration.mp3');
        audio.play().catch(() => {
            console.log('Autoplay was blocked. Please interact with the page to play sound.');
        });
    });

    // Additional Keyframes for JS-Generated Elements
    const styleSheet = document.createElement('style');
    styleSheet.textContent = `
        @keyframes confettiFall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(200px) rotate(720deg); opacity: 0; }
        }
        @keyframes burstFade {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
        }
    `;
    document.head.appendChild(styleSheet);
</script>

{% endblock %}